#!/bin/bash
export EDITOR="code --wait"
export KUBE_EDITOR="${EDITOR}"
export GOPATH="${HOME}/go"
export GOBIN="${GOPATH}/bin"
export GCP_ORGANIZATION="neuralnetes"
export GCP_PROJECT_ID="terraform-${GCP_ORGANIZATION}"
export GCP_WORKSPACE_DOMAIN_NAME="${GCP_ORGANIZATION}.com"
export GCS_TERRAFORM_REMOTE_STATE_BUCKET="terraform-${GCP_ORGANIZATION}"
export GCS_TERRAFORM_REMOTE_STATE_LOCATION="US"
export GITHUB_ORGANIZATION="neuralnetes"
export GITHUB_REPOSITORY="${GITHUB_ORGANIZATION}/monorepo"
export GITHUB_WORKSPACE="${GOPATH}/src/github.com/${GITHUB_REPOSITORY}"
export GITHUB_REF=$(cd "${GITHUB_WORKSPACE}" && git branch --show-current)
export GITHUB_SHA=$(cd "${GITHUB_WORKSPACE}" && git rev-parse HEAD)
export GITHUB_USER="lerms"
export GITHUB_USER_WORKSPACE="${GITHUB_WORKSPACE}/bash/workspace/${GITHUB_USER}"
export GOOGLE_APPLICATION_CREDENTIALS="${HOME}/.config/gcloud/application_default_credentials.json"
export KUBE_EDITOR="${EDITOR}"
TERRAGRUNT_CLI_FLAGS="$(
  echo '[
    "--terragrunt-include-dir global/terraform/**/**",
    "--terragrunt-include-dir global/iam/**/**",
    "--terragrunt-include-dir global/secret/**/**",
    "--terragrunt-include-dir global/network/**/**",
    "--terragrunt-include-dir global/data/**/**",
    "--terragrunt-include-dir global/compute/**/**",
    "--terragrunt-include-dir us-central1/network/**/**",
    "--terragrunt-include-dir us-central1/data/**/**",
    "--terragrunt-include-dir us-central1/compute/**/**"
  ]' | jq -rc
)"
export TERRAGRUNT_CLI_FLAGS
export TERRAGRUNT_COMMAND="run-all apply"
export TERRAGRUNT_WORKING_DIR="terragrunt/live/gcs/non-prod"
export PATH="${HOME}/.local/bin:${GOBIN}:${PATH}"
